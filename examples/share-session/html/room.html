<!DOCTYPE html>
<html>
<head>
<title>聊天室</title>
<base charset="utf-8" />
<link href="/room.css" rel="stylesheet">
<script src="http://code.jquery.com/jquery-1.6.1.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
</head>
<body>
<div class="room">
	<!-- 连接界面 -->
	<div id="connecting">
		<div class="wrap">正在连接到服务器...</div>
	</div>
	<!-- 主界面 -->
	<div id="chat">
		<!-- 消息区域 -->
		<div id="messages">
			<div id="lines" class="scrollbar">
				<div class="line">
					<div class="message-header">
						<span class="message-from">老雷</span>
						<span class="message-timestamp">2011-12-31</span>
					</div>
					<div class="message-text">
						这个是消息内容
					</div>
				</div>
			</div>
		</div>
		<!-- 在线列表区域 -->
		<div id="online">
			<div class="title">在线成员列表</div>
			<div id="nicknames" class="scrollbar">
				<div class="line">老雷</div>
				<div class="line">神马</div>
			</div>
		</div>
		<!-- 发送消息区域 -->
		<div id="send-message">
			<input id="message">
			<button onclick="sendmessage()">发送</button>
		</div>
	</div>
</div>
</body>
</html>
<script>
var room = '{{room}}';
var nickname = '{{nickname}}';
// 连接到房间
var socket = io.connect('/' + room);
// 界面处理
var resizeMessageBox = function () {
	var h = $(window).height() - 60;
	$('.room #chat #messages #lines').height(h);
	$('.room #chat #online #nicknames').height(h - 30);
}
$(window).resize(resizeMessageBox);
resizeMessageBox();
// 按回车发送
$('#message').keypress(function (e) {
	if (e.keyCode == 13) {
		sendmessage();
		return false;
	}
});
</script>
<script src="/room.js"></script>